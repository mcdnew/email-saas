(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"03bd":function(e,t,a){},"0441":function(e,t,a){"use strict";a("f697")},"04f7":function(e,t,a){"use strict";a("2f07")},"06fd":function(e,t,a){},"11f3":function(e,t,a){"use strict";a("e6e0")},1323:function(e,t,a){},"13d2":function(e,t,a){},"1ad2":function(e,t,a){},"1b97":function(e,t,a){},"1c5a":function(e,t,a){},"1e57":function(e,t,a){"use strict";a("1c5a")},"1ff3":function(e,t,a){"use strict";a("41e1")},2979:function(e,t,a){"use strict";a("1ad2")},"2bd5":function(e,t,a){},"2f07":function(e,t,a){},"2f12":function(e,t,a){"use strict";a("3622")},3622:function(e,t,a){},"3c88":function(e,t,a){},"41e1":function(e,t,a){},"4fe6":function(e,t,a){"use strict";a("13d2")},"50ec":function(e,t,a){},"62b7":function(e,t,a){"use strict";a("97fa")},6693:function(e,t,a){},"6ebe":function(e,t,a){"use strict";a("7bbd")},"6fc4":function(e,t,a){"use strict";a("f325")},7141:function(e,t,a){"use strict";a("c785")},7187:function(e,t,a){"use strict";a("d997")},"71ac":function(e,t,a){},"71b0":function(e,t,a){"use strict";a("dcd6")},7420:function(e,t,a){"use strict";a("71ac")},"772f":function(e,t,a){"use strict";a("82d7")},"7bbd":function(e,t,a){},"7bdf":function(e,t,a){},"7daf":function(e,t,a){},"803f":function(e,t,a){},"82ab":function(e,t,a){"use strict";a("7daf")},"82d7":function(e,t,a){},"85e4":function(e,t,a){},"87ab":function(e,t,a){},"89a5":function(e,t,a){"use strict";a("98e6")},"8abc":function(e,t,a){"use strict";a("afad")},"8d11":function(e,t,a){},"942c":function(e,t,a){"use strict";a("c629")},"961e":function(e,t,a){"use strict";a("2bd5")},"96b2":function(e,t,a){},"97fa":function(e,t,a){},"98e6":function(e,t,a){},"995d":function(e,t,a){"use strict";a("adc5")},"9ddc":function(e,t,a){},"9fdf":function(e,t,a){"use strict";a("87ab")},a0e4:function(e,t,a){"use strict";a("3c88")},a420:function(e,t,a){"use strict";a("7bdf")},a661:function(e,t,a){},a879:function(e,t,a){"use strict";a("96b2")},aa0f:function(e,t,a){"use strict";a("1323")},aa6a:function(e,t,a){"use strict";a("f2b1")},adc5:function(e,t,a){},ae6a:function(e,t,a){"use strict";a("50ec")},afad:function(e,t,a){},b0c7:function(e,t,a){"use strict";a("8d11")},b2b2:function(e,t,a){"use strict";a("03bd")},b453:function(e,t,a){"use strict";a("1b97")},bae8:function(e,t,a){"use strict";a("06fd")},c629:function(e,t,a){},c785:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4"),a("d3b7"),a("a15b"),a("ac1f"),a("1276");var n=a("2b0e"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{dark_mode:e.darkMode,light_mode:!e.darkMode},attrs:{id:"app"}},[t("router-view"),t("MessagePopup"),e.showAboutModal?t("AboutModal"):e._e()],1)},s=[],o=a("c7eb"),i=a("1da1"),c=a("bc3a"),l=a.n(c),u=function(){var e=this,t=e._self._c;return t("Modal",{on:{close:e.hideAboutModal}},[t("h1",[e._v(e._s(e.$t("About")))]),t("p",[e._v(e._s(e.$t("Thanks for using Piccolo Admin.")))]),t("p",[e._v(e._s(e.$t("Version"))+" "+e._s(e.piccoloAdminVersion))])])},d=[],p=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"overlay"}},[t("div",{staticClass:"modal opaque"},[t("div",{staticClass:"heading"},[t("h1",[e._v(e._s(e.title))]),t("p",{staticClass:"close"},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),e._t("default")],2)])},f=[],m={props:{title:{type:String,default:""}}},h=m,b=(a("fcbe"),a("2877")),v=Object(b["a"])(h,p,f,!1,null,"0a34a582",null),w=v.exports,_={components:{Modal:w},computed:{piccoloAdminVersion:function(){return this.$store.state.metaModule.piccoloAdminVersion}},methods:{hideAboutModal:function(){this.$store.commit("updateShowAboutModal",!1)}}},g=_,y=Object(b["a"])(g,u,d,!1,null,null,null),x=y.exports,O=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.visible?t("div",{class:{error:"error"==e.apiResponseMessage.type},attrs:{id:"message_popup"}},[t("p",{staticClass:"message"},[e._v(e._s(e.message))]),t("p",{staticClass:"close"},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.visible=!1}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]):e._e()},N=[],k=n["b"].extend({data:function(){return{visible:!1,timeLastAppeared:0}},computed:{message:function(){return this.apiResponseMessage?this.apiResponseMessage.contents:"-"},apiResponseMessage:function(){return this.$store.state.apiResponseMessage}},methods:{getTime:function(){return(new Date).getTime()}},watch:{visible:function(){this.timeLastAppeared=this.getTime()},apiResponseMessage:function(){var e=this;this.visible=!0;var t=this;setTimeout((function(){var a=e.getTime();a-t.timeLastAppeared>=3e3&&(t.visible=!1)}),3e3)}}}),j=k,C=(a("11f3"),Object(b["a"])(j,O,N,!1,null,null,null)),S=C.exports,$=n["b"].extend({components:{AboutModal:x,MessagePopup:S},computed:{darkMode:function(){return this.$store.state.darkMode},showAboutModal:function(){return this.$store.state.aboutModalModule.showAboutModal},siteName:function(){return this.$store.state.metaModule.siteName}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("darkMode")),null===a&&(a=!1),e.$store.commit("updateDarkMode",a),t.next=5,e.$store.dispatch("fetchMeta");case 5:document.title=e.siteName;case 6:case"end":return t.stop()}}),t)})))()},beforeCreate:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&401==e.response.status){console.log("Login required");var t=a.$route.path;"/login"!==t&&setTimeout((function(){a.$router.push({name:"login",query:{nextURL:t}})}),0)}return Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&405==e.response.status){console.log("Method not allowed");var t={contents:"Method not supported - running in read only mode.",type:"error"};a.$store.commit("updateApiResponseMessage",t)}return Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&404==e.response.status&&(console.log("Page not found"),alert("Page not found"),a.$router.push({name:"home"})),Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&502==e.response.status){console.log("The server can't be reached.");var t={contents:"The server can't be reached - please try later.",type:"error"};a.$store.commit("updateApiResponseMessage",t)}return Promise.reject(e)})),t.next=7,e.$store.dispatch("setupTranslations");case 7:return t.next=9,e.$store.dispatch("fetchUser");case 9:case"end":return t.stop()}}),t)})))()}}),R=$,P=(a("b2b2"),Object(b["a"])(R,r,s,!1,null,null,null)),D=P.exports,M=a("8c4f"),A=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[e.schema?t("AddRowForm",{attrs:{schema:e.schema,tableName:e.tableName}}):e._e()],1)},V=[],F=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",[e._v(e._s(e.$t("Add"))+" "+e._s(e._f("readable")(e.tableName)))]),e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),e.defaults?t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("RowForm",{attrs:{row:e.defaults,schema:e.schema}}),t("button",{attrs:{"data-uitest":"create_button"}},[e._v(e._s(e.$t("Create")))])],1):e._e()],1)},T=[],L=a("b85c"),B=(a("ddb0"),function(){var e=this,t=e._self._c;e._self._setupProxy;return e.row?t("div",e._l(e.schema.properties,(function(a,n){return t("div",{key:n},[t("label",[e._v(" "+e._s(a.title)+" "),e.isRequired(String(n))?t("span",{staticClass:"required"},[e._v("*")]):e._e(),a.extra.help_text?t("Tooltip",{attrs:{content:a.extra.help_text}}):e._e(),a.extra.foreign_key?[e.isFilter?e._e():t("router-link",{staticClass:"add",attrs:{to:{name:"addRow",params:{tableName:a.extra.to}},target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"plus"}})],1),!e.isFilter&&e.foreignKeyIDs[n]?t("router-link",{staticClass:"add",attrs:{to:{name:"editRow",params:{tableName:a.extra.to,rowID:e.foreignKeyIDs[n]}},target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"edit"}})],1):e._e()]:e._e()],2),a.extra.foreign_key?t("KeySearch",{attrs:{fieldName:String(n),tableName:a.extra.to,rowID:e.getValue(String(n)),readable:e.getValue(n+"_readable"),isNullable:a.nullable},on:{update:function(t){e.$set(e.foreignKeyIDs,String(n),t.id)}}}):t("InputField",{attrs:{columnName:n,format:a.format,isFilter:e.isFilter,isNullable:a.nullable,required:e.isRequired(String(n)),title:a.title,type:a.type||a.anyOf[0].type,value:e.getValue(String(n)),choices:a.extra.choices,isMediaColumn:e.isMediaColumn(String(n)),isRichText:e.isRichText(String(n))}})],1)})),0):e._e()}),I=[],U=a("3835"),E=(a("159b"),a("4fad"),a("caad"),a("2532"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"key_search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],attrs:{autocomplete:"off",placeholder:e.isFilter?"All":"None",type:"text"},domProps:{value:e.selectedValue},on:{focus:function(t){e.showModal=!0},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||(e.selectedValue=t.target.value)}}}),t("input",{attrs:{type:"hidden",name:e.fieldName},domProps:{value:e.hiddenSelectedValue}}),t("KeySearchModal",{directives:[{name:"show",rawName:"v-show",value:e.showModal,expression:"showModal"}],attrs:{isFilter:e.isFilter,tableName:e.tableName},on:{close:function(t){e.showModal=!1},update:function(t){e.handleUpdate(t),e.$emit("update",t)}}})],1)}),H=[],z=a("2909"),q=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{title:"Select a row from ".concat(e.readableTableName)},on:{close:function(t){return e.$emit("close")}}},[t("div",{staticClass:"input_wrapper"},[t("font-awesome-icon",{attrs:{icon:"search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{autocomplete:"off",placeholder:"Type here to filter",type:"search"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})],1),t("div",{staticClass:"results"},[t("ul",{staticClass:"results_list"},[e.isFilter?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult(null,"")}}},[e._v("All")])]):e._e(),e.isNullable?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult(null,"Null")}}},[e._v("None")])]):e._e(),e._l(e.ids,(function(a){return t("li",{key:a[0]},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult.apply(e,Object(z["a"])(a))}}},[e._v(" "+e._s(a[1])+" ")])])})),e.limitReached?e._e():t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loadMore.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"arrow-circle-down"}}),e._v(" Load more")],1)])],2)])])},K=[],G=(a("fb6a"),a("53ca"));a("d81d"),a("5319"),a("99af"),a("e9c4"),a("2ca0");function J(e){if(0===e)return"0 seconds";var t=Math.floor(e/604800),a=Math.floor(e/86400%7),n=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60),o=t>0?t+(1==t?" week ":" weeks "):"",i=a>0?a+(1==a?" day ":" days "):"",c=n>0?n+(1==n?" hour ":" hours "):"",l=r>0?r+(1==r?" minute ":" minutes "):"",u=s>0?s+(1==s?" second":" seconds"):"";return o+i+c+l+u}function W(e){return e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" ")}function Y(e,t){return 422==t?"object"==Object(G["a"])(e)?e["db_error"]?["Database error: ".concat(e["db_error"])]:e["detail"]?e["detail"].map((function(e){var t=e.loc[e.loc.length-1];return"".concat(t," field - ").concat(e.msg)})):e["custom_form_error"]?[e["custom_form_error"]]:[JSON.stringify(e)]:[e]:405==t?"object"==Object(G["a"])(e)?e["detail"]?[e["detail"]]:[JSON.stringify(e)]:[e]:"object"==Object(G["a"])(e)?[JSON.stringify(e)]:[e]}function X(e){var t=e.key,a=e.value,n=e.schema;return"null"==a?a=null:"array"==n.properties[t].type?a=JSON.parse(String(a)):("uuid"==(null===n||void 0===n?void 0:n.properties[t].format)&&""==a||"email"==(null===n||void 0===n?void 0:n.properties[t].format)&&""==a||"date-time"==(null===n||void 0===n?void 0:n.properties[t].format)&&""==a||"date"==(null===n||void 0===n?void 0:n.properties[t].format)&&""==a||"integer"==(null===n||void 0===n?void 0:n.properties[t].type)&&""==a||"number"==(null===n||void 0===n?void 0:n.properties[t].type)&&""==a||1==(null===n||void 0===n?void 0:n.properties[t].extra.foreign_key)&&""==a)&&(a=null),a}function Q(e){return e.map((function(e){return e.ascending?e.column:"-".concat(e.column)})).join(",")}function Z(e){return e.split(",").map((function(e){var t=!e.startsWith("-");return{column:t?e:e.slice(1),ascending:t}}))}var ee=function(e){ks.replace({name:"rowListing",query:e})},te=5,ae={props:{tableName:String,isFilter:{type:Boolean,default:!1},isNullable:{type:Boolean,default:!0}},data:function(){return{ids:[],offset:0,limitReached:!1,searchTerm:"",debounceTimer:null}},components:{Modal:w},computed:{readableTableName:function(){return W(this.tableName.split("_").join(" "))}},methods:{fetchData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tableName:e.tableName,search:e.searchTerm,limit:te+1,offset:e.offset},t.next=3,e.$store.dispatch("fetchIds",a);case 3:return n=t.sent,r=Object.entries(n.data),e.limitReached=r.length<=te,t.abrupt("return",r.slice(0,te));case 7:case"end":return t.stop()}}),t)})))()},scrollResultsToBottom:function(){setTimeout((function(){var e=document.getElementsByClassName("results_list")[0];e.scrollIntoView(!1)}),0)},loadMore:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offset+=te,t.next=3,e.fetchData();case 3:n=t.sent,(a=e.ids).push.apply(a,Object(z["a"])(n)),e.scrollResultsToBottom();case 6:case"end":return t.stop()}}),t)})))()},selectResult:function(e,t){this.$emit("update",{id:e,readable:t})}},watch:{tableName:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offset=0,t.next=3,e.fetchData();case 3:e.ids=t.sent;case 4:case"end":return t.stop()}}),t)})))()},searchTerm:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.debounceTimer&&clearTimeout(e.debounceTimer),a=e,e.debounceTimer=setTimeout(Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.offset=0,e.next=3,a.fetchData();case 3:a.ids=e.sent;case 4:case"end":return e.stop()}}),e)}))),300);case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.ids=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},ne=ae,re=(a("b0c7"),Object(b["a"])(ne,q,K,!1,null,"ba15fc26",null)),se=re.exports,oe=Object(n["c"])({props:{fieldName:String,tableName:String,rowID:void 0,readable:void 0,isFilter:{type:Boolean,default:!1},isNullable:{type:Boolean,default:!1}},data:function(){return{ids:[],selectedValue:void 0,hiddenSelectedValue:void 0,showModal:!1}},methods:{handleUpdate:function(e){this.selectedValue=e.readable,this.hiddenSelectedValue=e.id,this.showModal=!1}},components:{KeySearchModal:se},watch:{readable:function(e){this.selectedValue=e},rowID:function(e){this.hiddenSelectedValue=e}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedValue=e.readable,e.hiddenSelectedValue=e.rowID;case 2:case"end":return t.stop()}}),t)})))()}}),ie=oe,ce=Object(b["a"])(ie,E,H,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isMediaColumn&&!e.isFilter?[t("div",{staticClass:"media_block"},[t("input",{attrs:{type:"file"},on:{change:function(t){return e.uploadFile(t)}}}),e.localValue&&"array"!=e.type?t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"eye",title:"View"}})],1):e._e()]),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e(),e.showLoadingOverlay?t("LoadingOverlay"):e._e()]:e._e(),e.choices&&"array"!=e.type?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("ChoiceSelect",{attrs:{choices:e.choices,fieldName:e.columnName,isFilter:e.isFilter,isNullable:e.isNullable,value:e.value}})]:"integer"==e.type?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("input",{attrs:{step:"1",type:"number",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.value}})]:"string"==e.type?[-1!=["date-time","date","time"].indexOf(e.format)?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("flat-pickr",{attrs:{config:{enableTime:-1!=["date-time","time"].indexOf(e.format),disableMobile:!0,noCalendar:"time"==e.format},name:e.columnName,placeholder:e.placeholder},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})]:"text-area"==e.format&&0==e.isFilter?t("div",[e.isRichText?t("vue-editor",{attrs:{name:e.columnName,"editor-toolbar":e.customToolbar},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}}):t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],ref:"textarea",style:{height:e.textareaHeight},attrs:{autocomplete:"off",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:[function(t){t.target.composing||(e.localValue=t.target.value)},e.setTextareaHeight]}}),t("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.localValue,expression:"localValue",modifiers:{lazy:!0}}],attrs:{id:"editor",name:e.columnName},domProps:{value:e.localValue},on:{change:function(t){e.localValue=t.target.value}}})],1):"json"==e.format?t("div",[t("textarea",{ref:"textarea",style:{height:e.textareaHeight},attrs:{autocomplete:"off",name:e.columnName},domProps:{value:e.localValue?JSON.stringify(JSON.parse(e.localValue),null,2):null},on:{input:e.setTextareaHeight}})]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"text",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]:"boolean"==e.type?[t("select",{attrs:{name:e.columnName}},[e.isFilter?t("option",{attrs:{value:"all"},domProps:{selected:"all"==e.value}},[e._v(" All ")]):e._e(),e.isNullable?t("option",{attrs:{value:"null"},domProps:{selected:null==e.value}},[e._v(" Null ")]):e._e(),t("option",{attrs:{value:"true"},domProps:{selected:1==e.value}},[e._v(" True ")]),t("option",{attrs:{value:"false"},domProps:{selected:0==e.value}},[e._v(" False ")])])]:"number"==e.type?["time-delta"==e.format?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("DurationWidget",{attrs:{timedelta:e.localValue},on:{newTimedelta:function(t){return e.updateLocalValue(t)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"hidden",name:e.columnName},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]:[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"text",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]]:"array"==e.type?[t("ArrayWidget",{attrs:{array:e.localValue,enableAddButton:e.isFilter||!e.isMediaColumn,fieldName:e.columnName,isFilter:e.isFilter,choices:e.choices,isNullable:e.isNullable},on:{updateArray:function(t){e.localValue=t}}}),t("input",{attrs:{type:"hidden",name:e.columnName},domProps:{value:e.localValue?JSON.stringify(e.localValue):null}})]:e._e()],2)},de=[],pe=a("c38f"),fe=a.n(pe),me=a("5873"),he=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("ul",{staticClass:"array_items"},[e._l(e.internalArray,(function(a,n){return t("li",{key:n},[e.choices?[t("ChoiceSelect",{attrs:{fieldName:"",value:a,choices:e.choices,isNullable:e.isNullable,isFilter:e.isFilter,isArray:!0},on:{updated:function(t){return e.updateArray(t,n)}}})]:[t("input",{attrs:{type:e.inputType},domProps:{value:a},on:{change:function(t){e.updateArray(e.getValueFromEvent(t),n)}}})],e.isMediaColumn&&!e.isFilter?t("a",{attrs:{href:"#",value:a},on:{click:function(t){return t.preventDefault(),e.showMedia(n)}}},[t("font-awesome-icon",{attrs:{icon:"eye",title:"View"}})],1):e._e(),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeArrayElement(n)}}},[t("font-awesome-icon",{attrs:{icon:"times",title:"Remove"}})],1)],2)})),t("li",[e.enableAddButton?t("a",{staticClass:"add",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addArrayElement.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"plus",title:"Add"}}),e._v(e._s(e.$t("Add"))+" ")],1):e._e()])],2),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e()],1)},be=[],ve=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:e.fieldName},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?a:a[0]}}},[e.isFilter&&!e.isArray?t("option",{attrs:{value:"all"},domProps:{selected:"all"==e.value}},[e._v(" All ")]):e._e(),e.isNullable?t("option",{attrs:{value:"null"},domProps:{selected:null==e.value}},[e._v(" Null ")]):e._e(),e._l(e.choices,(function(a,n){return t("option",{key:n,domProps:{selected:e.value==a.value,value:a.value}},[e._v(" "+e._s(a.display_name)+" ")])}))],2)},we=[],_e=Object(n["c"])({props:{fieldName:{type:String,default:""},value:{type:void 0,default:void 0},choices:{type:Object,default:function(){return{}}},isNullable:{type:Boolean,default:!1},isFilter:{type:Boolean,default:!1},isArray:{type:Boolean,default:!1}},data:function(){return{localValue:""}},emits:["updated"],mounted:function(){this.localValue=this.isFilter?"all":this.value},watch:{value:function(e){this.localValue=e},localValue:function(e){this.$emit("updated",e)}}}),ge=_e,ye=Object(b["a"])(ge,ve,we,!1,null,null,null),xe=ye.exports,Oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"media_viewer"}},[t("div",{staticClass:"top_bar"},[t("p",{staticClass:"file_key"},[t("span",[e._v("File:")]),e._v(" "+e._s(e.mediaViewerConfig.fileKey)+" ")]),t("p",{staticClass:"close"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),e.fileURL?[e.isImage(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"image_container"},[t("img",{attrs:{src:e.fileURL}})]):e.isVideo(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"video_container"},[t("video",{attrs:{controls:"",src:e.fileURL}},[e._v(" Video playback not available ")])]):e.isAudio(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"audio_container"},[t("audio",{attrs:{controls:"",src:e.fileURL}},[e._v(" Audio playback not available ")])]):e.isPDF(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"pdf_container"},[t("iframe",{attrs:{src:e.fileURL}})]):t("div",{staticClass:"no_preview"},[t("p",[t("font-awesome-icon",{attrs:{icon:"file"}}),e._v(" Unable to preview file - download below. ")],1)])]:t("div",{staticClass:"loading_container"},[t("p",[t("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"circle-notch"}}),e._v("Loading ... ")],1)]),t("div",{staticClass:"bottom_bar"},[e.fileURL?t("p",[t("a",{staticClass:"button",attrs:{href:e.fileURL,download:""}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" Download")],1)]):e._e()])],2)},Ne=[],ke="./api/",je=["mp3","wav"],Ce=["gif","jpeg","jpg","png","svg","tif","webp"],Se=["mp4","webm"],$e=n["b"].extend({props:{mediaViewerConfig:{type:Object}},data:function(){return{fileURL:null}},methods:{isAudio:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=je.indexOf(a)},isImage:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=Ce.indexOf(a)},isPDF:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return"pdf"==a.toLowerCase()},isVideo:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=Se.indexOf(a)},generateFileURL:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.columnName,n=e.tableName,r=e.fileKey,t.next=3,l.a.post("".concat(ke,"media/generate-file-url/"),{column_name:a,table_name:n,file_key:r});case 3:return s=t.sent,t.abrupt("return",s.data["file_url"]);case 5:case"end":return t.stop()}}),t)})))()}},watch:{mediaViewerConfig:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}return a.next=3,t.generateFileURL(e);case 3:t.fileURL=a.sent;case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.mediaViewerConfig){t.next=4;break}return t.next=3,e.generateFileURL(e.mediaViewerConfig);case 3:e.fileURL=t.sent;case 4:case"end":return t.stop()}}),t)})))()}}),Re=$e,Pe=(a("8abc"),Object(b["a"])(Re,Oe,Ne,!1,null,null,null)),De=Pe.exports,Me=n["b"].extend({props:{array:{type:Array,default:function(){return[]}},inputType:{type:String,default:"text"},fieldName:{type:String,default:""},enableAddButton:{type:Boolean,default:!0},isFilter:{type:Boolean,default:!0},choices:{type:Object,default:function(){return{}}},isNullable:{type:Boolean,default:!1}},components:{ChoiceSelect:xe,MediaViewer:De},data:function(){return{internalArray:[],showMediaViewer:!1,mediaViewerConfig:null}},computed:{schema:function(){return this.$store.state.schema},currentTableName:function(){return this.$store.state.currentTableName},isMediaColumn:function(){var e;return null===(e=this.schema)||void 0===e?void 0:e.media_columns.includes(this.fieldName)}},methods:{getValueFromEvent:function(e){return e.target.value},updateArray:function(e,t){this.$set(this.internalArray,t,e),this.$emit("updateArray",this.internalArray)},addArrayElement:function(){this.internalArray=[].concat(Object(z["a"])(this.internalArray),[""]),this.$emit("updateArray",this.internalArray)},removeArrayElement:function(e){this.$delete(this.internalArray,e),this.$emit("updateArray",this.internalArray)},showMedia:function(e){var t={fileKey:this.internalArray[e],columnName:this.fieldName,tableName:this.currentTableName};this.mediaViewerConfig=t,this.showMediaViewer=!0}},watch:{array:function(){this.internalArray=Object(z["a"])(this.array)}},mounted:function(){this.internalArray=Object(z["a"])(this.array)}}),Ae=Me,Ve=(a("4fe6"),Object(b["a"])(Ae,he,be,!1,null,"71cb0dcc",null)),Fe=Ve.exports,Te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"timedelta_widget"},[t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Weeks")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.weeks,expression:"weeks",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.weeks=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.weekRange,(function(a){return t("option",{key:"w"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Days")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.days,expression:"days",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.days=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.dayRange,(function(a){return t("option",{key:"d"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Hours")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.hours,expression:"hours",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.hours=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.hourRange,(function(a){return t("option",{key:"h"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Minutes")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.minutes,expression:"minutes",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.minutes=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.minuteRange,(function(a){return t("option",{key:"m"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Seconds")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.seconds,expression:"seconds",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.seconds=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.secondRange,(function(a){return t("option",{key:"s"+a},[e._v(" "+e._s(a)+" ")])})),0)])])},Le=[],Be=(a("a9e3"),60),Ie=60*Be,Ue=24*Ie,Ee=7*Ue,He={props:{timedelta:{default:0,type:Number}},data:function(){return{weekRange:Object(z["a"])(Array(500).keys()),dayRange:Object(z["a"])(Array(7).keys()),hourRange:Object(z["a"])(Array(24).keys()),minuteRange:Object(z["a"])(Array(60).keys()),secondRange:Object(z["a"])(Array(60).keys()),weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0}},methods:{emitEvent:function(){var e=this.seconds+this.minutes*Be+this.hours*Ie+this.days*Ue+this.weeks*Ee;this.$emit("newTimedelta",e)},setupValues:function(e){this.weeks=Math.floor(e/Ee),e+=-this.weeks*Ee,this.days=Math.floor(e/Ue),e+=-this.days*Ue,this.hours=Math.floor(e/Ie),e+=-this.hours*Ie,this.minutes=Math.floor(e/Be),e+=-this.minutes*Be,this.seconds=e}},watch:{timedelta:function(e){this.setupValues(e)}},mounted:function(){this.setupValues(this.timedelta)}},ze=He,qe=(a("71b0"),Object(b["a"])(ze,Te,Le,!1,null,"e138270e",null)),Ke=qe.exports,Ge=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading_overlay"},[t("p",[t("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"circle-notch"}}),e._v(e._s(e.message)+" ")],1)])},Je=[],We=n["b"].extend({props:{message:{type:String,default:"Uploading file"}}}),Ye=We,Xe=(a("b453"),Object(b["a"])(Ye,Ge,Je,!1,null,"2244031c",null)),Qe=Xe.exports,Ze=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("select",{attrs:{name:e.columnName+"__operator"}},e._l(e.operators,(function(a){return t("option",{key:a.label,domProps:{selected:"e"==a.value,value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),0)},et=[],tt=n["b"].extend({props:{columnName:{type:String,required:!0}},data:function(){return{operators:[{label:"Equals",value:"e"},{label:"Less Than",value:"lt"},{label:"Less Than or Equal To",value:"lte"},{label:"Greater Than or Equal To",value:"gte"},{label:"Greater Than",value:"gt"}]}}}),at=tt,nt=Object(b["a"])(at,Ze,et,!1,null,null,null),rt=nt.exports,st=n["b"].extend({props:{title:{type:String,required:!0},columnName:{type:String,required:!0},type:{type:String,default:"string"},value:{type:void 0,default:void 0},format:{type:String,default:void 0},isFilter:{type:Boolean,default:!0},isNullable:{type:Boolean,default:!1},choices:{type:Object,default:null},isMediaColumn:{type:Boolean,default:!1},isRichText:{type:Boolean,default:!1}},components:{flatPickr:fe.a,ArrayWidget:Fe,ChoiceSelect:xe,DurationWidget:Ke,LoadingOverlay:Qe,MediaViewer:De,OperatorField:rt,VueEditor:me["a"]},data:function(){return{localValue:void 0,textareaHeight:"50px",showMediaViewer:!1,mediaViewerConfig:null,customToolbar:[["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["link","image","code-block"],[{header:[!1,1,2,3]}]],showLoadingOverlay:!1}},computed:{placeholder:function(){return this.isFilter?"All":this.isNullable&&null===this.value?"NULL":""},currentTableName:function(){return this.$store.state.currentTableName}},methods:{setTextareaHeight:function(){var e=this.$refs.textarea;e&&e.scrollHeight>e.clientHeight&&(this.textareaHeight=e.scrollHeight+"px")},updateLocalValue:function(e){this.localValue=e},showMedia:function(){var e={fileKey:this.localValue,columnName:this.columnName,tableName:this.currentTableName};this.mediaViewerConfig=e,this.showMediaViewer=!0},uploadFile:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,u,d,p,f,m;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.target.files[0],n){a.next=3;break}return a.abrupt("return");case 3:return r=new FormData,r.append("table_name",t.currentTableName),r.append("column_name",t.columnName),r.append("file",n),t.showLoadingOverlay=!0,a.prev=8,a.next=11,l.a.post("./api/media/",r,{headers:{"Content-Type":"multipart/form-data"}});case 11:s=a.sent,"array"==t.type?t.localValue?t.localValue.push(s.data.file_key):t.localValue=[s.data.file_key]:t.localValue=s.data.file_key,a.next=22;break;case 15:a.prev=15,a.t0=a["catch"](8),c="The request failed.",u=null===(i=a.t0.response)||void 0===i?void 0:i.status,u&&(c=413==u?"The file is too large.":500==u?"An error happened on the server.":null!==(d=null===(p=a.t0.response)||void 0===p||null===(f=p.data)||void 0===f?void 0:f.detail)&&void 0!==d?d:"Unknown error"),m={contents:c,type:"error"},t.$store.commit("updateApiResponseMessage",m);case 22:e.target.value="",t.showLoadingOverlay=!1;case 24:case"end":return a.stop()}}),a,null,[[8,15]])})))()}},watch:{value:function(){this.localValue=this.value,this.setTextareaHeight()},currentTableName:function(){this.localValue=void 0}},mounted:function(){this.localValue=this.value;var e=this;setTimeout((function(){e.setTextareaHeight()}),0)}}),ot=st,it=(a("aa0f"),Object(b["a"])(ot,ue,de,!1,null,"af0913e2",null)),ct=it.exports,lt=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tooltip"},[t("a",{attrs:{href:"#",title:"Click for more info"},on:{click:function(t){t.preventDefault(),e.popupVisible?e.hidePopup(t):e.showPopup(t)},blur:function(t){return e.hidePopup()}}},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.popupVisible,expression:"popupVisible"}],staticClass:"popup",style:{top:e.popupTop,bottom:e.popupBottom,right:e.popupRight,left:e.popupLeft,width:e.popupWidth,textAlign:e.textAlign}},[t("span",[e._v(e._s(e.content))])])])},ut=[],dt={props:{content:{default:"",type:String}},data:function(){return{popupVisible:!1,popupTop:"auto",popupBottom:"auto",popupLeft:"auto",popupRight:"auto",popupWidth:void 0,textAlign:void 0}},methods:{showPopup:function(e){var t=document.body.scrollHeight,a=document.body.scrollWidth,n=e.pageY,r=e.pageX;r<150?(console.log("Right"),this.popupLeft=r+20+"px",this.popupRight="auto",this.popupWidth=a-r-20+"px",this.textAlign="left"):a-r<150?(console.log("Left"),this.popupLeft="auto",this.popupRight=r-20+"px",this.popupWidth=r-20+"px",this.textAlign="right"):(console.log("Center"),this.popupWidth="300px",this.popupLeft=r-150+"px",this.popupRight="auto",this.textAlign="center"),t-n<300?(console.log("Above"),this.popupBottom=t-n+20+"px",this.popupTop="auto"):(console.log("Below"),this.popupBottom="auto",this.popupTop=n+20+"px"),this.popupVisible=!0},hidePopup:function(){this.popupVisible=!1}},mounted:function(){var e=this;function t(){e.popupVisible=!1}this.onResize=t,window.addEventListener("resize",t)},destroyed:function(){this.onResize&&window.removeEventListener("resize",this.onResize)}},pt=dt,ft=(a("a420"),Object(b["a"])(pt,lt,ut,!1,null,null,null)),mt=ft.exports,ht=n["b"].extend({props:{row:Object,schema:Object,isFilter:{type:Boolean,default:!1}},components:{InputField:ct,KeySearch:le,Tooltip:mt},setup:function(e){var t=Object(n["e"])(e),a=t.schema,r=t.row,s=Object(n["a"])((function(){var e=[];return Object.entries(a.value.properties).forEach((function(t){var a=Object(U["a"])(t,2),n=a[0],r=a[1];1==r.extra.foreign_key&&e.push(n)})),e})),o=Object(n["a"])((function(){var e={};return s.value.forEach((function(t){e[t]=r.value[t]})),Object(n["d"])(e)}));return{foreignKeyIDs:o}},methods:{getValue:function(e){var t=this.row?this.row[e]:void 0;return t},isRequired:function(e){return!this.isFilter&&-1!=(this.schema.required||[]).indexOf(e)},isMediaColumn:function(e){return this.schema.media_columns.includes(e)},isRichText:function(e){return this.schema.rich_text_columns.includes(e)}}}),bt=ht,vt=(a("2979"),Object(b["a"])(bt,B,I,!1,null,"38ddf7d3",null)),wt=vt.exports,_t=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"errors"},[t("p",[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("Error")],1),t("ul",e._l(e.errors,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])},gt=[],yt=n["b"].extend({props:{errors:{type:Array,default:function(){return[]}}}}),xt=yt,Ot=(a("995d"),Object(b["a"])(xt,_t,gt,!1,null,"3e182eea",null)),Nt=Ot.exports,kt=n["b"].extend({props:{tableName:String,schema:Object},components:{RowForm:wt,FormErrors:Nt},data:function(){return{defaults:{},errors:[]}},methods:{submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,d;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,l=c[0],u=c[1],r[l]=X({key:l,value:u,schema:t.schema})}catch(o){s.e(o)}finally{s.f()}return a.prev=4,a.next=7,t.$store.dispatch("createRow",{tableName:t.tableName,data:r});case 7:a.next=16;break;case 9:return a.prev=9,a.t0=a["catch"](4),t.errors=Y(a.t0.response.data,a.t0.response.status),window.scrollTo(0,0),d={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",d),a.abrupt("return");case 16:t.errors=[],d={contents:"Successfully added row",type:"success"},t.$store.commit("updateApiResponseMessage",d),t.$emit("addedRow"),t.$emit("close");case 21:case"end":return a.stop()}}),a,null,[[4,9]])})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getNew",e.tableName);case 2:a=t.sent,e.defaults=a.data;case 4:case"end":return t.stop()}}),t)})))()}}),jt=kt,Ct=(a("772f"),Object(b["a"])(jt,F,T,!1,null,"ea7e01bc",null)),St=Ct.exports,$t=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("NavBar",{attrs:{username:e.username,siteName:e.siteName}}),t("div",{staticClass:"inner"},[t("BackButton"),e._t("default")],2)],1)},Rt=[],Pt=function(){var e=this,t=e._self._c;return t("p",[e.showBackButton?t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[t("font-awesome-icon",{attrs:{icon:"angle-left"}}),e._v(e._s(e.$t("Back"))+" ")],1):e._e()])},Dt=[],Mt={computed:{showBackButton:function(){return window.history.length>1}}},At=Mt,Vt=(a("2f12"),Object(b["a"])(At,Pt,Dt,!1,null,"7f2a658d",null)),Ft=Vt.exports,Tt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{attrs:{id:"nav"}},[t("span",{attrs:{id:"burger_menu"}},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showSidebar=!e.showSidebar}}},[e.showSidebar?t("font-awesome-icon",{attrs:{icon:"times"}}):t("font-awesome-icon",{attrs:{icon:"bars"}})],1)]),t("h1",[t("router-link",{attrs:{to:"/"}},[t("font-awesome-icon",{attrs:{icon:"tools"}}),e._v(" "+e._s(e.siteName)+" ")],1)],1),t("ul",[t("li",{staticStyle:{"margin-right":"1rem"}},[t("a",{attrs:{href:"#",title:"Translations"},on:{click:function(t){t.preventDefault(),e.showLanguageDropdown=!e.showLanguageDropdown}}},[t("font-awesome-icon",{attrs:{icon:"language",size:"lg"}})],1),e.showLanguageDropdown?t("NavTranslationsMenu",{on:{closeDropdown:e.closeDropdown}}):e._e()],1),t("li",[t("a",{attrs:{href:"#",id:"user",title:e.username},on:{click:function(t){t.preventDefault(),e.showDropdown=!e.showDropdown}}},[t("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.truncatedUsername)+" "),e.showDropdown?t("font-awesome-icon",{attrs:{icon:"angle-up"}}):e._e(),e.showDropdown?e._e():t("font-awesome-icon",{attrs:{icon:"angle-down"}}),e.showDropdown?t("NavDropDownMenu"):e._e()],1)])])]),e.showSidebar?t("SidebarOverlay"):e._e()],1)},Lt=[],Bt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DropDownMenu",[t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),e._v(e._s(e.$t("Log out"))+" ")],1)]),t("li",[t("router-link",{attrs:{to:{name:"changePassword"}}},[t("font-awesome-icon",{attrs:{icon:"key"}}),e._v(e._s(e.$t("Change password"))+" ")],1)],1),e.darkMode?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateDarkMode(!1)}}},[t("font-awesome-icon",{attrs:{icon:"sun"}}),e._v(e._s(e.$t("Light Mode"))+" ")],1)]):t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateDarkMode(!0)}}},[t("font-awesome-icon",{attrs:{icon:"moon"}}),e._v(e._s(e.$t("Dark Mode"))+" ")],1)]),t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showAboutModal.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v(e._s(e.$t("About"))+" Piccolo ")],1)])])},It=[],Ut=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{attrs:{id:"drop_down_menu"}},[e._t("default")],2)},Et=[],Ht=n["b"].extend({}),zt=Ht,qt=(a("ae6a"),Object(b["a"])(zt,Ut,Et,!1,null,"2bd4ab6c",null)),Kt=qt.exports,Gt=n["b"].extend({components:{DropDownMenu:Kt},computed:{darkMode:function(){return this.$store.state.darkMode}},methods:{updateDarkMode:function(e){this.$store.commit("updateDarkMode",e)},showAboutModal:function(){this.$store.commit("updateShowAboutModal",!0)},logout:function(){return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to logout?")){e.next=12;break}return console.log("Logging out"),e.prev=2,e.next=5,l.a.post("./public/logout/");case 5:location.replace(window.location.pathname),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log("Logout failed"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}}),Jt=Gt,Wt=Object(b["a"])(Jt,Bt,It,!1,null,"63437e50",null),Yt=Wt.exports,Xt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"opaque",attrs:{id:"sidebar_overlay"}},[t("SidebarNav")],1)},Qt=[],Zt=(a("b64b"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sidebar"},[t("p",{staticClass:"opaque"},[t("router-link",{staticClass:"subtle",attrs:{to:"/"}},[t("font-awesome-icon",{attrs:{icon:"home"}}),e._v(e._s(e.$t("Home"))+" ")],1)],1),t("p",{staticClass:"opaque",on:{click:function(t){e.isHiddenTables=!e.isHiddenTables}}},[t("font-awesome-icon",{attrs:{icon:"table"}}),e._v(e._s(e.$t("Tables"))+" "),t("span",{staticStyle:{float:"right"}},[e.isHiddenTables?t("font-awesome-icon",{attrs:{icon:"angle-down",title:"Show tables"}}):t("font-awesome-icon",{attrs:{icon:"angle-up",title:"Hide tables"}})],1)],1),t("TableNav",{directives:[{name:"show",rawName:"v-show",value:!e.isHiddenTables,expression:"!isHiddenTables"}]}),e.formConfigs.length>0?t("p",{staticClass:"opaque",on:{click:function(t){e.isHiddenForms=!e.isHiddenForms}}},[t("font-awesome-icon",{attrs:{icon:"cogs"}}),e._v(e._s(e.$t("Forms"))+" "),t("span",{staticStyle:{float:"right"}},[e.isHiddenForms?t("font-awesome-icon",{attrs:{icon:"angle-down",title:"Show forms"}}):t("font-awesome-icon",{attrs:{icon:"angle-up",title:"Hide forms"}})],1)],1):e._e(),t("FormNav",{directives:[{name:"show",rawName:"v-show",value:!e.isHiddenForms,expression:"!isHiddenForms"}]}),Object.keys(e.customLinks).length>0?t("p",{staticClass:"opaque",on:{click:function(t){e.isHiddenLinks=!e.isHiddenLinks}}},[t("font-awesome-icon",{attrs:{icon:"link"}}),e._v(e._s(e.$t("Links"))+" "),t("span",{staticStyle:{float:"right"}},[e.isHiddenLinks?t("font-awesome-icon",{attrs:{icon:"angle-down",title:"Show links"}}):t("font-awesome-icon",{attrs:{icon:"angle-up",title:"Hide links"}})],1)],1):e._e(),t("LinksNav",{directives:[{name:"show",rawName:"v-show",value:!e.isHiddenLinks,expression:"!isHiddenLinks"}]})],1)}),ea=[],ta=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("ul",{staticClass:"table_list"},[e._l(e.tableGroups.ungrouped,(function(e){return t("TableNavItem",{key:e,attrs:{tableName:e}})})),e._l(e.tableGroups.grouped,(function(a,n){return[t("li",{staticClass:"group"},[t("a",{staticClass:"subtle",attrs:{href:"#",title:"Click to toggle children."},on:{click:function(t){return t.preventDefault(),e.toggleGroup(n)}}},[t("font-awesome-icon",{attrs:{icon:"layer-group"}}),t("span",{staticClass:"name"},[e._v(e._s(n))]),-1!=e.hiddenGroups.indexOf(n)?t("span",{staticClass:"ellipsis"},[e._v("...")]):e._e()],1)]),-1==e.hiddenGroups.indexOf(n)?e._l(a,(function(e){return t("TableNavItem",{key:e,attrs:{tableName:e}})})):e._e()]}))],2)])},aa=[],na=(a("a434"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("li",[t("router-link",{staticClass:"subtle",class:{active:e.isActive(e.tableName)},attrs:{to:{name:"rowListing",params:{tableName:e.tableName}}}},[t("font-awesome-icon",{staticClass:"rotated90",attrs:{icon:"level-up-alt"}}),t("span",[e._v(e._s(e.readableTableName))])],1)],1)}),ra=[],sa=n["b"].extend({props:{tableName:String},computed:{currentTableName:function(){return this.$store.state.currentTableName},readableTableName:function(){return this.tableName.split("_").join(" ")}},methods:{isActive:function(e){return this.currentTableName===e}}}),oa=sa,ia=Object(b["a"])(oa,na,ra,!1,null,null,null),ca=ia.exports,la=n["b"].extend({components:{TableNavItem:ca},data:function(){return{hiddenGroups:[]}},computed:{tableGroups:function(){return this.$store.state.tableGroups},currentTableName:function(){return this.$store.state.currentTableName}},methods:{toggleGroup:function(e){var t=this.hiddenGroups,a=t.indexOf(e);-1==a?t.push(e):t.splice(a,1),this.hiddenGroups=t}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchTableGroups");case 2:case"end":return t.stop()}}),t)})))()}}),ua=la,da=(a("a879"),Object(b["a"])(ua,ta,aa,!1,null,"eaf52826",null)),pa=da.exports,fa=(a("b0c0"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",e._l(e.formConfigs,(function(a){return t("li",{key:a.name},[t("router-link",{staticClass:"subtle",attrs:{to:{name:"addForm",params:{formSlug:a.slug}}}},[t("font-awesome-icon",{staticClass:"rotated90",attrs:{icon:"level-up-alt"}}),t("span",[e._v(e._s(e._f("readable")(a.name)))])],1)],1)})),0)}),ma=[],ha=n["b"].extend({computed:{formConfigs:function(){return this.$store.state.formConfigs}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormConfigs");case 2:case"end":return t.stop()}}),t)})))()}}),ba=ha,va=Object(b["a"])(ba,fa,ma,!1,null,null,null),wa=va.exports,_a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",e._l(e.customLinks,(function(a,n){return t("li",{key:n},[t("a",{staticClass:"subtle",attrs:{href:a}},[t("font-awesome-icon",{staticClass:"rotated90",attrs:{icon:"level-up-alt"}}),t("span",[e._v(e._s(n))])],1)])})),0)},ga=[],ya=n["b"].extend({computed:{customLinks:function(){return this.$store.state.customLinks}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchCustomLinks");case 2:case"end":return t.stop()}}),t)})))()}}),xa=ya,Oa=Object(b["a"])(xa,_a,ga,!1,null,null,null),Na=Oa.exports,ka=n["b"].extend({data:function(){return{isHiddenTables:!1,isHiddenForms:!1,isHiddenLinks:!1}},components:{TableNav:pa,FormNav:wa,LinksNav:Na},computed:{formConfigs:function(){return this.$store.state.formConfigs},customLinks:function(){return this.$store.state.customLinks}}}),ja=ka,Ca=(a("942c"),Object(b["a"])(ja,Zt,ea,!1,null,null,null)),Sa=Ca.exports,$a={components:{SidebarNav:Sa}},Ra=$a,Pa=(a("e034"),Object(b["a"])(Ra,Xt,Qt,!1,null,null,null)),Da=Pa.exports,Ma=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DropDownMenu",e._l(e.translations,(function(a){return t("li",{key:a.language_code},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateLanguage(a.language_code)}}},[e.currentLanguageCode==a.language_code?t("font-awesome-icon",{attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(a.language_name)+" "),t("span",{staticClass:"language_code"},[e._v("("+e._s(a.language_code)+")")])],1)])})),0)},Aa=[],Va=n["b"].extend({components:{DropDownMenu:Kt},methods:{updateLanguage:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("loadTranslation",e);case 2:t.$emit("closeDropdown",!1);case 3:case"end":return a.stop()}}),a)})))()}},computed:{translations:function(){return this.$store.state.translationsModule.translations},currentLanguageCode:function(){return this.$i18n.locale||"en"}}}),Fa=Va,Ta=(a("04f7"),Object(b["a"])(Fa,Ma,Aa,!1,null,"243523b8",null)),La=Ta.exports,Ba=n["b"].extend({props:{username:{type:String,default:"Unknown"},siteName:{type:String,default:"Piccolo Admin"}},data:function(){return{showSidebar:!1,showDropdown:!1,showLanguageDropdown:!1}},computed:{truncatedUsername:function(){var e=this.username;return e.length>20?e.slice(0,16)+"...":e}},components:{SidebarOverlay:Da,NavDropDownMenu:Yt,NavTranslationsMenu:La},methods:{closeDropdown:function(e){this.showLanguageDropdown=e}}}),Ia=Ba,Ua=(a("bae8"),Object(b["a"])(Ia,Tt,Lt,!1,null,null,null)),Ea=Ua.exports,Ha=n["b"].extend({components:{BackButton:Ft,NavBar:Ea},computed:{username:function(){var e=this.$store.state.user;return e?e.username:"Unknown"},siteName:function(){return this.$store.state.metaModule.siteName}}}),za=Ha,qa=(a("7187"),Object(b["a"])(za,$t,Rt,!1,null,"883edc22",null)),Ka=qa.exports,Ga=n["b"].extend({props:["tableName"],components:{AddRowForm:St,DetailViewBase:Ka},computed:{schema:function(){return this.$store.state.schema}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),t.next=3,e.$store.dispatch("fetchSchema",e.tableName);case 3:case"end":return t.stop()}}),t)})))()}}),Ja=Ga,Wa=Object(b["a"])(Ja,A,V,!1,null,"f3682b66",null),Ya=Wa.exports,Xa=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[t("EditRowForm",{attrs:{rowID:e.rowID,tableName:e.tableName}})],1)},Qa=[],Za=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.schema?t("div",[t("div",{staticClass:"header"},[t("h1",[e._v(e._s(e.$t("Edit"))+" "+e._s(e._f("readable")(e.tableName)))]),t("p",[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showDropdown=!e.showDropdown}}},[t("font-awesome-icon",{attrs:{icon:"ellipsis-v"}}),e.showDropdown?t("DropDownMenu",[t("li",[t("DeleteButton",{staticClass:"subtle",attrs:{includeTitle:!0},on:{triggered:e.deleteRow}})],1)]):e._e()],1)])]),e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("RowForm",{attrs:{row:e.selectedRow,schema:e.schema}}),t("button",[e._v(e._s(e.$t("Save")))])],1),t("ReferencingTables",{attrs:{rowID:e.rowID,tableName:e.tableName}})],1):e._e()},en=[],tn=(a("3ca3"),function(){var e=this,t=e._self._c;return e.references.length>0?t("div",[t("p",{staticClass:"referencing_title"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showReferencing=!e.showReferencing}}},[e.showReferencing?t("span",[t("font-awesome-icon",{attrs:{icon:"angle-down"}}),e._v(e._s(e.$t("Hide referencing tables"))+" ")],1):t("span",[t("font-awesome-icon",{attrs:{icon:"angle-right"}}),e._v(e._s(e.$t("Show referencing tables"))+" ")],1)])]),e.showReferencing?t("ul",{staticClass:"related_tables"},e._l(e.references,(function(a){return t("li",{key:a.tableName+a.columnName},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clickedReference(a)}}},[t("font-awesome-icon",{attrs:{icon:"external-link-alt"}}),t("span",{staticClass:"table bold"},[e._v(e._s(a.tableName))]),e._v(" "+e._s(e.$t("with a matching"))+" "),t("span",{staticClass:"bold"},[e._v(e._s(a.columnName))])],1)])})),0):e._e()]):e._e()}),an=[],nn={props:{tableName:{type:String},rowID:{type:void 0}},data:function(){return{references:[],showReferencing:!1}},methods:{fetchTableReferences:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchTableReferences",e.tableName);case 2:a=t.sent,e.references=a.data.references;case 4:case"end":return t.stop()}}),t)})))()},clickedReference:function(e){var t=e.columnName,a={};a[t]=this.rowID;var n={name:"rowListing",params:{tableName:e.tableName},query:a},r=this.$router.resolve(n).href;window.open("".concat(document.location.origin).concat(document.location.pathname).concat(r),"_blank")}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchTableReferences();case 2:case"end":return t.stop()}}),t)})))()}},rn=nn,sn=(a("1e57"),Object(b["a"])(rn,tn,an,!1,null,"e7c77cec",null)),on=sn.exports,cn=function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"#",id:"delete",title:"Delete Row"},on:{click:function(t){return t.preventDefault(),e.$emit("triggered")}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e.includeTitle?t("span",[e._v(e._s(e.$t("Delete")))]):e._e()],1)},ln=[],un={props:{includeTitle:{type:Boolean,default:!1}}},dn=un,pn=(a("6ebe"),Object(b["a"])(dn,cn,ln,!1,null,"2e7b729a",null)),fn=pn.exports,mn=n["b"].extend({props:{tableName:{type:String},rowID:{type:void 0}},components:{DeleteButton:fn,DropDownMenu:Kt,RowForm:wt,ReferencingTables:on,FormErrors:Nt},data:function(){return{errors:[],showDropdown:!1}},computed:{schema:function(){return this.$store.state.schema},selectedRow:function(){return this.$store.state.selectedRow}},methods:{submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,d,p;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("Submitting..."),n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,l=c[0],u=c[1],r[l]=X({key:l,value:u,schema:t.schema})}catch(o){s.e(o)}finally{s.f()}return d={tableName:t.tableName,rowID:t.rowID,data:r},a.prev=6,a.next=9,t.$store.dispatch("updateRow",d);case 9:p={contents:"Successfully saved row",type:"success"},t.$store.commit("updateApiResponseMessage",p),a.next=20;break;case 13:return a.prev=13,a.t0=a["catch"](6),t.errors=Y(a.t0.response.data,a.t0.response.status),window.scrollTo(0,0),p={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",p),a.abrupt("return");case 20:t.errors=[];case 21:case"end":return a.stop()}}),a,null,[[6,13]])})))()},deleteRow:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this row?")){t.next=6;break}return a={tableName:e.tableName,rowID:e.rowID},t.next=4,e.$store.dispatch("deleteRow",a);case 4:alert("Successfully deleted row"),e.$router.push({name:"rowListing",params:{tableName:e.tableName}});case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),t.next=3,e.$store.dispatch("fetchSingleRow",{tableName:e.tableName,rowID:e.rowID});case 3:case"end":return t.stop()}}),t)})))()}},watch:{"$route.params.tableName":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchData(),this.$store.dispatch("fetchSchema",this.tableName)]);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),"$route.params.rowID":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchData(),e.$store.dispatch("fetchSchema",e.tableName)]);case 2:case"end":return t.stop()}}),t)})))()}}),hn=mn,bn=(a("f481"),Object(b["a"])(hn,Za,en,!1,null,"1ffd087b",null)),vn=bn.exports,wn=n["b"].extend({props:["tableName","rowID"],components:{EditRowForm:vn,DetailViewBase:Ka}}),_n=wn,gn=Object(b["a"])(_n,Xa,Qa,!1,null,"43d5c64e",null),yn=gn.exports,xn=function(){var e=this,t=e._self._c;return t("BaseView",[t("div",{staticClass:"welcome"},[t("h1",[e._v(e._s(e.$t("Welcome to"))+" "+e._s(e.siteName))]),t("p",[e._v(" "+e._s(e.$t("Select a table in the sidebar to get started."))+" ")])])])},On=[],Nn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"base_view"},[t("NavBar",{attrs:{username:e.username,siteName:e.siteName}}),t("div",{staticClass:"wrapper"},[t("div",{staticClass:"sidebar_wrapper"},[t("SidebarNav")],1),e._t("default")],2)],1)},kn=[],jn=n["b"].extend({components:{NavBar:Ea,SidebarNav:Sa},computed:{username:function(){var e=this.$store.state.user;return e?e.username:"Unknown"},siteName:function(){return this.$store.state.metaModule.siteName}}}),Cn=jn,Sn=(a("82ab"),Object(b["a"])(Cn,Nn,kn,!1,null,null,null)),$n=Sn.exports,Rn={components:{BaseView:$n},computed:{siteName:function(){return this.$store.state.metaModule.siteName}},mounted:function(){this.$store.commit("updateCurrentTablename","")}},Pn=Rn,Dn=(a("aa6a"),Object(b["a"])(Pn,xn,On,!1,null,"63e3b1c8",null)),Mn=Dn.exports,An=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login"}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"heading"},[t("h1",[e._v(e._s(e.siteName))])]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("label",[e._v(e._s(e.$t("Username")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{name:"username",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("label",[e._v(e._s(e.$t("Password")))]),t("PasswordInput",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("button",{attrs:{"data-uitest":"login_button"}},[e._v(e._s(e.$t("Login")))])],1)])])},Vn=[],Fn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password_wrapper"},[t("input",{attrs:{name:"password",type:e.showPassword?"text":"password"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e.value?t("span",{staticClass:"viewer",on:{click:function(t){e.showPassword=!e.showPassword}}},[e.showPassword?t("font-awesome-icon",{attrs:{icon:"eye-slash",title:"Hide password"}}):t("font-awesome-icon",{attrs:{icon:"eye",title:"Show password"}})],1):e._e()])},Tn=[],Ln={props:{value:String},data:function(){return{showPassword:!1}}},Bn=Ln,In=(a("7420"),Object(b["a"])(Bn,Fn,Tn,!1,null,null,null)),Un=In.exports,En={data:function(){return{username:"",password:""}},components:{PasswordInput:Un},computed:{siteName:function(){return this.$store.state.metaModule.siteName}},methods:{login:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Logging in"),t.prev=1,t.next=4,l.a.post("./public/login/",{username:e.username,password:e.password});case 4:t.next=12;break;case 6:return t.prev=6,t.t0=t["catch"](1),console.log("Request failed"),console.log(t.t0.response),e.$store.commit("updateApiResponseMessage",{contents:"Problem logging in",type:"error"}),t.abrupt("return");case 12:return t.next=14,e.$store.dispatch("fetchUser");case 14:a=e.$route.query.nextURL,a?e.$router.push({path:a}):e.$router.push({name:"home"});case 16:case"end":return t.stop()}}),t,null,[[1,6]])})))()}}},Hn=En,zn=(a("7141"),Object(b["a"])(Hn,An,Vn,!1,null,null,null)),qn=zn.exports,Kn=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"change_password"}},[t("div",{staticClass:"inner"},[t("BackButton"),t("div",{staticClass:"heading"},[t("h1",[e._v(e._s(e.$t("Change password")))])]),t("form",{on:{submit:function(t){return t.preventDefault(),e.changePassword.apply(null,arguments)}}},[t("label",[e._v(e._s(e.$t("Current password")))]),t("PasswordInput",{model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}}),t("label",[e._v(e._s(e.$t("New password")))]),t("PasswordInput",{model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),t("label",[e._v(e._s(e.$t("New password confirmation")))]),t("PasswordInput",{model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}}),t("button",[e._v(e._s(e.$t("Change password")))])],1)],1)])},Gn=[],Jn={data:function(){return{currentPassword:"",newPassword:"",confirmNewPassword:""}},components:{BackButton:Ft,PasswordInput:Un},methods:{changePassword:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={current_password:e.currentPassword,new_password:e.newPassword,confirm_new_password:e.confirmNewPassword},t.prev=1,t.next=4,l.a.post("./api/change-password/",a);case 4:e.$store.commit("updateApiResponseMessage",{contents:"Changed password successfully. You will be redirected\n                        to log in with your new credentials.",type:"success"}),setTimeout((function(){e.$router.push({name:"home"})}),3e3),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Request failed"),console.log(t.t0.response),e.$store.commit("updateApiResponseMessage",{contents:"Error - ".concat(t.t0.response.data.detail),type:"error"});case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},Wn=Jn,Yn=(a("fffc"),Object(b["a"])(Wn,Kn,Gn,!1,null,null,null)),Xn=Yn.exports,Qn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("BaseView",[void 0!=e.schema?[t("div",{staticClass:"left_column"},[t("div",{staticClass:"title_bar"},[t("div",{staticClass:"title"},[t("h1",[e._v(e._s(e._f("readable")(e.tableName)))]),e.schema.help_text?t("Tooltip",{attrs:{content:e.schema.help_text}}):e._e()],1),t("div",{staticClass:"buttons"},[e.selectedRows.length>0?t("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showUpdateModal=!e.showUpdateModal}}},[t("font-awesome-icon",{attrs:{icon:"arrow-up"}}),t("span",[e._v("Update "+e._s(e.selectedRows.length)+" rows")])],1):e._e(),e.selectedRows.length>0?t("BulkDeleteButton",{attrs:{selected:e.selectedRows.length},on:{triggered:e.deleteRows}}):e._e(),t("router-link",{staticClass:"button",attrs:{to:{name:"addRow",params:{tableName:e.tableName}}},on:{click:function(t){t.preventDefault(),e.showAddRow=!0}}},[t("font-awesome-icon",{attrs:{icon:"plus"}}),t("span",[e._v(e._s(e.$t("Add Row")))])],1),t("a",{staticClass:"button",attrs:{href:"#","data-uitest":"sort_button"},on:{click:function(t){t.preventDefault(),e.showSortModal=!e.showSortModal}}},[t("font-awesome-icon",{attrs:{icon:"sort"}}),t("span",[e._v(e._s(e.$t("Sort")))])],1),t("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showFilter=!e.showFilter}}},[t("font-awesome-icon",{attrs:{icon:"filter"}}),t("span",[e._v(" "+e._s(e.showFilter?e.$t("Hide Filters"):e.$t("Show Filters"))+" ")])],1),t("CSVButton",{attrs:{tableName:e.tableName}})],1)]),e.selectedRows.length>0?t("p",{attrs:{id:"selected_count"}},[t("b",[e._v(e._s(e.selectedRows.length))]),e._v(" "+e._s(e.$t("selected result(s) on"))+" "),t("b",[e._v(e._s(e.$t("page"))+" "+e._s(e.currentPageNumber))])]):e._e(),t("div",{staticClass:"table_wrapper"},[t("transition",{attrs:{name:"fade"}},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.loadingStatus,expression:"loadingStatus"}],attrs:{id:"loading_indicator"}},[e._v(" "+e._s(e.$t("Loading"))+" ... ")])]),t("transition",{attrs:{name:"fade"}},[e.loadingStatus||void 0==e.rows?e._e():t("div",[0==e.rows.length?t("p",[e._v(" "+e._s(e.$t("No results found"))+" ")]):[t("table",[t("tr",[t("th",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:[function(t){var a=e.allSelected,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.allSelected=a.concat([s])):o>-1&&(e.allSelected=a.slice(0,o).concat(a.slice(o+1)))}else e.allSelected=r},e.selectAllRows]}})]),e._l(e.visibleColumnNames,(function(a){return t("th",{key:a},[e._v(" "+e._s(e.schema.properties[a]?e.schema.properties[a].title:a)+" "),e.orderByMapping[a]?t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showSortModal=!0}}},[e.orderByMapping[a].ascending?t("font-awesome-icon",{attrs:{icon:"caret-up"}}):t("font-awesome-icon",{attrs:{icon:"caret-down"}})],1):e._e()])})),t("th")],2),e._l(e.rows,(function(a){return t("tr",{key:a[e.pkName]},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRows,expression:"selectedRows"}],attrs:{type:"checkbox"},domProps:{value:a[e.pkName],checked:Array.isArray(e.selectedRows)?e._i(e.selectedRows,a[e.pkName])>-1:e.selectedRows},on:{click:e.selectRow,change:function(t){var n=e.selectedRows,r=t.target,s=!!r.checked;if(Array.isArray(n)){var o=a[e.pkName],i=e._i(n,o);r.checked?i<0&&(e.selectedRows=n.concat([o])):i>-1&&(e.selectedRows=n.slice(0,i).concat(n.slice(i+1)))}else e.selectedRows=s}}})]),e._l(e.visibleColumnNames,(function(n){return t("td",{key:n},[n==e.linkColumnName?t("span",{staticClass:"link"},[t("router-link",{attrs:{to:{name:"editRow",params:{tableName:e.tableName,rowID:a[e.pkName]}}}},[e._v(e._s(a[n]))])],1):n==e.pkName?t("span",[e._v(e._s(e._f("abbreviate")(a[n])))]):e.choicesLookup[n]?t("span",[e._v(" "+e._s(e.choicesLookup[n][a[n]])+" ")]):e.isForeignKey(n)&&null!==a[n]?t("span",{staticClass:"link"},[t("router-link",{attrs:{to:{name:"editRow",params:{tableName:e.getTableName(n),rowID:a[n]}}}},[e._v(e._s(a[n+"_readable"]))])],1):e.isBoolean(n)?t("span",{staticClass:"boolean"},[!0===a[n]?t("font-awesome-icon",{staticClass:"correct",attrs:{icon:"check"}}):!1===a[n]?t("font-awesome-icon",{staticClass:"incorrect",attrs:{icon:"times"}}):t("code",[e._v("NULL")])],1):e.isInterval(n)?t("span",[e._v(" "+e._s(e._f("humanReadable")(a[n]))+" ")]):e.isJSON(n)?t("span",[t("pre",[e._v(e._s(e._f("abbreviate")(e._f("formatJSON")(a[n]))))])]):e.isMediaColumn(n)?t("span",[e.isArray(n)?e._l(a[n],(function(a){return t("a",{key:a,staticStyle:{display:"block"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia(a,n)}}},[e._v(e._s(e._f("abbreviate")(a))+" ")])})):[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia(a[n],n)}}},[e._v(e._s(e._f("abbreviate")(a[n]))+" ")])]],2):t("span",[null===a[n]?t("code",[e._v("NULL")]):t("span",[e._v(" "+e._s(e._f("abbreviate")(a[n]))+" ")])])])})),t("td",[t("span",{staticStyle:{position:"relative",display:"block","text-align":"right"}},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.visibleDropdown=e.visibleDropdown?void 0:a[e.pkName]}}},[t("font-awesome-icon",{attrs:{icon:"ellipsis-v"}})],1),e.visibleDropdown==a[e.pkName]?t("DropDownMenu",[t("li",[t("router-link",{staticClass:"subtle",attrs:{to:{name:"editRow",params:{tableName:e.tableName,rowID:a[e.pkName]}},title:"Edit Row"}},[t("font-awesome-icon",{attrs:{icon:"edit"}}),e._v(e._s(e.$t("Edit"))+" ")],1)],1),t("li",[t("DeleteButton",{staticClass:"subtle delete",attrs:{includeTitle:!0},on:{triggered:function(t){return e.deleteRow(a[e.pkName])}}})],1)]):e._e()],1)])],2)}))],2),t("p",{attrs:{id:"result_count"}},[e._v(" "+e._s(e.$t("Showing"))+" "+e._s(e.rows.length)+" "+e._s(e.$t("of"))+" "+e._s(e.rowCount)+" "+e._s(e.$t("result(s)"))+" ")]),t("div",{staticClass:"pagination_wrapper"},[t("Pagination",{attrs:{tableName:e.tableName}}),t("ChangePageSize")],1)]],2)])],1)]),e.showFilter?t("div",{staticClass:"right_column"},[t("RowFilter",{attrs:{showFilterSidebar:e.showFilter},on:{closeSideBar:e.closeSideBar}})],1):e._e(),e.showAddRow?t("AddRowModal",{attrs:{schema:e.schema,tableName:e.tableName},on:{addedRow:e.fetchRows,close:function(t){e.showAddRow=!1}}}):e._e(),e.showSortModal?t("OrderByModal",{attrs:{schema:e.schema,tableName:e.tableName},on:{close:function(t){e.showSortModal=!1}}}):e._e(),e.showUpdateModal?t("BulkUpdateModal",{attrs:{schema:e.schema,tableName:e.tableName,selectedRows:e.selectedRows},on:{close:function(t){e.showUpdateModal=!1}}}):e._e(),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e()]:e._e()],2)},Zn=[],er=(a("c1f9"),a("13d5"),a("07ac"),function(){var e=this,t=e._self._c;return t("Modal",{on:{close:function(t){return e.$emit("close")}}},[t("AddRowForm",{attrs:{schema:e.schema,tableName:e.tableName},on:{addedRow:function(t){return e.$emit("addedRow")},close:function(t){return e.$emit("close")}}})],1)}),tr=[],ar={props:{tableName:String,schema:Object},components:{Modal:w,AddRowForm:St}},nr=ar,rr=Object(b["a"])(nr,er,tr,!1,null,"b598f334",null),sr=rr.exports,or=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{attrs:{title:"Bulk Update"},on:{close:function(t){return e.$emit("close")}}},[e.schema?[t("p",[e._v(e._s(e.$t("Select a column to update")))]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPropertyName,expression:"selectedPropertyName"}],attrs:{name:"property"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPropertyName=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"null",disabled:""}},[e._v(" "+e._s(e.$t("Select a Column"))+" ")]),e._l(e.schema.properties,(function(a,n){return[n!=e.schema.primary_key_name?t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(a.title)+" ")]):e._e()]}))],2),t("p",{directives:[{name:"show",rawName:"v-show",value:e.selectedPropertyName,expression:"selectedPropertyName"}]},[e._v(e._s(e.$t("New value")))]),e.selectedPropertyName?t("form",{on:{submit:function(t){return t.preventDefault(),e.updateRows(t)}}},[e.selectedProperty.extra.foreign_key?t("KeySearch",{key:e.selectedProperty.title,attrs:{fieldName:e.selectedPropertyName,tableName:e.selectedProperty.extra.to,isNullable:e.selectedProperty.nullable}}):t("InputField",{attrs:{columnName:e.selectedPropertyName,format:e.selectedProperty.format,isFilter:!1,title:e.selectedProperty.title,type:e.selectedProperty.type||e.selectedProperty.anyOf[0].type,choices:e.selectedProperty.extra.choices}}),e.selectedProperty.nullable?t("div",{staticClass:"set_null"},[t("label",[e._v("Set null:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nullCheckboxState,expression:"nullCheckboxState"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.nullCheckboxState)?e._i(e.nullCheckboxState,null)>-1:e.nullCheckboxState},on:{change:function(t){var a=e.nullCheckboxState,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.nullCheckboxState=a.concat([s])):o>-1&&(e.nullCheckboxState=a.slice(0,o).concat(a.slice(o+1)))}else e.nullCheckboxState=r}}})]):e._e(),t("button",{attrs:{disabled:!e.buttonEnabled}},[e._v(e._s(e.$t("Update")))])],1):e._e()]:e._e()],2)},ir=[],cr=n["b"].extend({props:{schema:Object,tableName:String,selectedRows:{type:Array,default:function(){return[]}}},components:{Modal:w,InputField:ct,KeySearch:le},data:function(){return{selectedPropertyName:null,nullCheckboxState:!1,buttonEnabled:!0}},computed:{selectedProperty:function(){return this.schema.properties[this.selectedPropertyName]}},methods:{updateRows:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("Updating ..."),t.buttonEnabled=!1,n=new FormData(e.target),r={},s=null,t.nullCheckboxState||(s=n.get(t.selectedPropertyName),"array"==t.selectedProperty.type&&(s=JSON.parse(s))),r[t.selectedPropertyName]=s,a.prev=7,i=0;case 9:if(!(i<t.selectedRows.length)){a.next=15;break}return a.next=12,t.$store.dispatch("updateRow",{tableName:t.tableName,rowID:t.selectedRows[i],data:r});case 12:i++,a.next=9;break;case 15:return c={contents:"Successfully updated rows",type:"success"},t.$store.commit("updateApiResponseMessage",c),t.$emit("close"),a.next=20,t.$store.dispatch("fetchRows");case 20:a.next=27;break;case 22:a.prev=22,a.t0=a["catch"](7),console.log(a.t0),c={contents:"Invalid column name or value",type:"error"},t.$store.commit("updateApiResponseMessage",c);case 27:t.buttonEnabled=!0;case 28:case"end":return a.stop()}}),a,null,[[7,22]])})))()}}}),lr=cr,ur=(a("1ff3"),Object(b["a"])(lr,or,ir,!1,null,null,null)),dr=ur.exports,pr=function(){var e=this,t=e._self._c;return t("a",{staticClass:"button",attrs:{href:"#",title:"Delete selected Rows"},on:{click:function(t){return t.preventDefault(),e.$emit("triggered")}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}}),t("span",[e._v(e._s(e.$t("Delete"))+" "+e._s(e.selected)+" "+e._s(e.$t("rows")))])],1)},fr=[],mr={props:{selected:{type:Number,default:0}}},hr=mr,br=Object(b["a"])(hr,pr,fr,!1,null,null,null),vr=br.exports,wr=function(){var e=this,t=e._self._c;return t("a",{staticClass:"button"},[t("downloadexcel",{attrs:{"before-finish":e.finishDownload,"before-generate":e.startDownload,fetch:e.fetchExportedRows,name:e.tableName+".csv",type:"csv"}},[t("font-awesome-icon",{attrs:{icon:"file-csv"}}),t("span",[e._v(e._s(e.$t("Export CSV")))])],1)],1)},_r=[],gr=a("5530"),yr=a("f2d9"),xr={props:["tableName"],components:{downloadexcel:yr["a"]},methods:{fetchExportedRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i,c,u,d,p;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.state.filterParams,n=e.$store.state.orderBy,n&&(a["__order"]=Q(n)),t.next=5,l.a.get("api/tables/".concat(e.tableName,"/count/"),{params:a});case 5:r=t.sent,s=r.data,i=Object(gr["a"])({},a),i["__page"]=s.count,i["__page_size"]=1e3,c=Math.ceil(s.count/i["__page_size"]),u=[],t.prev=12,d=1;case 14:if(!(d<c+1)){t.next=23;break}return i["__page"]=d,t.next=18,l.a.get("api/tables/".concat(e.tableName,"/?__readable=true"),{params:i});case 18:p=t.sent,u.push.apply(u,Object(z["a"])(p.data.rows));case 20:d++,t.next=14;break;case 23:return t.abrupt("return",u);case 26:t.prev=26,t.t0=t["catch"](12),console.log(t.t0.response);case 29:case"end":return t.stop()}}),t,null,[[12,26]])})))()},startDownload:function(){alert("Your data will begin downloading. Large data sets may take a few seconds.")},finishDownload:function(){alert("Your data is ready.")}}},Or=xr,Nr=(a("0441"),Object(b["a"])(Or,wr,_r,!1,null,"18a52ad9",null)),kr=Nr.exports,jr=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"page_size"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPageSize,expression:"selectedPageSize"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPageSize=t.target.multiple?a:a[0]},e.changePageSize]}},e._l(e.pageOptions,(function(a){return t("option",{key:a,attrs:{label:"".concat(a," per page")}},[e._v(" "+e._s(a)+" ")])})),0)])},Cr=[],Sr={data:function(){return{selectedPageSize:15,pageOptions:[5,15,30,50,100]}},methods:{changePageSize:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updatePageSize",e.selectedPageSize),e.$store.commit("updateCurrentPageNumber",1),t.next=4,e.$store.dispatch("fetchRows");case 4:case"end":return t.stop()}}),t)})))()}},computed:{pageSize:function(){return this.$store.state.pageSize}},watch:{pageSize:function(){this.selectedPageSize=this.pageSize}},mounted:function(){this.selectedPageSize=this.pageSize}},$r=Sr,Rr=(a("efff"),Object(b["a"])($r,jr,Cr,!1,null,"29cdf581",null)),Pr=Rr.exports,Dr=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"pagination"}},[e.pageCount<20?t("ul",{staticClass:"pages"},e._l(e.pageCount,(function(a){return t("li",{key:a},[t("a",{staticClass:"subtle",class:{active:a===e.currentPageNumber},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.changePage(a)}}},[e._v(e._s(a))])])})),0):t("div",{staticClass:"page_select"},[t("label",[e._v(e._s(e.$t("Go to page")))]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageDropdownValue,expression:"pageDropdownValue"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageDropdownValue=t.target.multiple?a:a[0]}}},e._l(e.pageCount,(function(a){return t("option",{key:a},[e._v(e._s(a))])})),0)])])},Mr=[],Ar={props:{tableName:String},data:function(){return{pageDropdownValue:0}},computed:{rowCount:function(){return this.$store.state.rowCount||0},pageSize:function(){return this.$store.state.pageSize||1},pageCount:function(){var e=Math.ceil(this.rowCount/this.pageSize);return e<1?1:e},currentTableName:function(){return this.$store.state.currentTableName},filterParams:function(){return this.$store.state.filterParams},currentPageNumber:function(){return this.$store.state.currentPageNumber}},methods:{changePage:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.currentPageNumber==e){a.next=5;break}return console.log("Navigating to "+e),t.$store.commit("updateCurrentPageNumber",e),a.next=5,t.$store.dispatch("fetchRows");case 5:case"end":return a.stop()}}),a)})))()}},watch:{pageDropdownValue:function(e){this.changePage(e)}},mounted:function(){this.pageDropdownValue=this.currentPageNumber}},Vr=Ar,Fr=(a("a0e4"),Object(b["a"])(Vr,Dr,Mr,!1,null,"284bee46",null)),Tr=Fr.exports,Lr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"filter_wrapper"},[t("h1",[e._v(e._s(e.$t("Filter")))]),t("a",{staticClass:"button",attrs:{id:"sidebar-close"},on:{click:function(t){return e.closeSideBar()}}},[t("span",[t("font-awesome-icon",{attrs:{icon:"times"}})],1),e._v(e._s(e.$t("Close"))+" ")]),t("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("FilterForm",{attrs:{schema:e.schema}}),t("button",[e._v(e._s(e.$t("Apply")))])],1),t("button",{on:{click:function(t){return t.preventDefault(),e.clearFilters.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("Clear filters"))+" ")])])},Br=[],Ir=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._l(e.schema.properties,(function(a,n){return[e.schema.visible_filter_names.includes(String(n))?t("div",{key:a.title},[a.extra.foreign_key?[t("label",[e._v(" "+e._s(a.title)+" ")]),t("KeySearch",{key:a.title,attrs:{fieldName:String(n),isFilter:!0,readable:null,rowID:null,tableName:a.extra.to,isNullable:a.nullable}})]:"json"!==a.format?[t("label",[e._v(" "+e._s(a.title)+" ")]),t("InputField",{key:a.title,attrs:{columnName:n,choices:a.extra.choices,format:a.format,isFilter:!0,isNullable:a.nullable,title:a.title,type:a.type||a.anyOf[0].type,value:e.getValue(String(n))}})]:e._e()],2):e._e()]}))],2)},Ur=[],Er=Object(n["c"])({props:{schema:Object},components:{InputField:ct,KeySearch:le},methods:{getValue:function(e){var t=this.schema;return"boolean"==t.properties[e].type?"all":null}}}),Hr=Er,zr=Object(b["a"])(Hr,Ir,Ur,!1,null,null,null),qr=zr.exports,Kr=n["b"].extend({props:{showFilterSidebar:Boolean},components:{FilterForm:qr},computed:{schema:function(){return this.$store.state.schema}},methods:{closeSideBar:function(){this.$emit("closeSideBar",!1)},showSuccess:function(e){var t={contents:e,type:"success"};this.$store.commit("updateApiResponseMessage",t)},submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,d;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,l=c[0],u=c[1],u&&"all"!=u&&("array"==(null===(d=t.schema.properties[l])||void 0===d?void 0:d.type)&&(u=JSON.parse(u).filter((function(e){return e})),u=Array.isArray(u)?u.filter((function(e){return e})):u),"null"==u?r["".concat(l,"__operator")]="is_null":r[l]=u)}catch(o){s.e(o)}finally{s.f()}return t.$store.commit("updateFilterParams",r),t.$store.commit("updateCurrentPageNumber",1),a.prev=6,a.next=9,t.$store.dispatch("fetchRows");case 9:a.next=14;break;case 11:return a.prev=11,a.t0=a["catch"](6),a.abrupt("return");case 14:t.showSuccess("Successfully applied filter");case 15:case"end":return a.stop()}}),a,null,[[6,11]])})))()},clearFilters:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Clearing ..."),a=e.$refs.form,Object(z["a"])(a.elements).forEach((function(e){"hidden"==e.type&&(e.value="")})),a.reset(),e.$store.commit("updateFilterParams",{}),e.$store.commit("updateCurrentPageNumber",1),t.prev=6,t.next=9,e.$store.dispatch("fetchRows");case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](6),t.abrupt("return");case 14:e.showSuccess("Successfully cleared filters");case 15:case"end":return t.stop()}}),t,null,[[6,11]])})))()}}}),Gr=Kr,Jr=(a("62b7"),Object(b["a"])(Gr,Lr,Br,!1,null,"eb9e0928",null)),Wr=Jr.exports,Yr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{on:{close:function(t){return e.$emit("close")}}},[e.schema?[t("p",[e._v(e._s(e.$t("Sort by"))+":")]),e._l(e.localCopy,(function(a,n){return t("div",[n>0?t("hr"):e._e(),t("p",{staticClass:"remove"},[n>0?t("a",{attrs:{href:"#",title:"Remove","data-uitest":"remove_column_button"},on:{click:function(t){return t.preventDefault(),e.removeOrderByColumn(n)}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1):e._e()]),t("select",{directives:[{name:"model",rawName:"v-model",value:a.column,expression:"config.column"}],attrs:{name:"column","data-uitest":"sort_by_selector"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"column",t.target.multiple?n:n[0])}}},[t("option",{domProps:{value:e.schema.primary_key_name}},[e._v(" "+e._s(e.schema.primary_key_name)+" ")]),e._l(e.schema.properties,(function(a,n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])}))],2),t("select",{directives:[{name:"model",rawName:"v-model",value:a.ascending,expression:"config.ascending"}],attrs:{name:"ordering"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"ascending",t.target.multiple?n:n[0])}}},[t("option",{domProps:{value:!0}},[e._v(e._s(e.$t("Ascending")))]),t("option",{domProps:{value:!1}},[e._v(e._s(e.$t("Descending")))])])])})),t("p",{attrs:{id:"add_sort_column"}},[t("a",{attrs:{href:"#","data-uitest":"add_sort_column_button"},on:{click:function(t){return t.preventDefault(),e.addOrderByColumn.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add sort column")],1)]),t("button",{attrs:{"data-uitest":"sort_form_button"},on:{click:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("Sort"))+" ")])]:e._e()],2)},Xr=[],Qr=Object(n["c"])({props:{schema:Object,tableName:String},data:function(){return{localCopy:null}},components:{Modal:w},methods:{save:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.localCopy,n=a.filter((function(e){return e.column})),e.$store.commit("updateOrderBy",n),ee({__order:Q(n)}),t.next=6,e.$store.dispatch("fetchRows");case 6:e.$emit("close");case 7:case"end":return t.stop()}}),t)})))()},addOrderByColumn:function(){var e={column:null,ascending:!0};this.localCopy.push(e)},removeOrderByColumn:function(e){this.localCopy.splice(e,1)}},mounted:function(){var e=this.$store.state.orderBy,t=e?e.map((function(e){return Object(gr["a"])({},e)})):[];this.localCopy=t}}),Zr=Qr,es=(a("89a5"),Object(b["a"])(Zr,Yr,Xr,!1,null,"4773de69",null)),ts=es.exports,as=n["b"].extend({props:["tableName"],data:function(){return{selectedRows:[],allSelected:!1,showAddRow:!1,showFilter:!1,showSortModal:!1,showUpdateModal:!1,visibleDropdown:null,showMediaViewer:!1,mediaViewerConfig:null}},components:{AddRowModal:sr,BaseView:$n,BulkDeleteButton:vr,BulkUpdateModal:dr,ChangePageSize:Pr,CSVButton:kr,DeleteButton:fn,DropDownMenu:Kt,MediaViewer:De,Pagination:Tr,RowFilter:Wr,OrderByModal:ts,Tooltip:mt},computed:{visibleColumnNames:function(){return this.schema.visible_column_names},rows:function(){return this.$store.state.rows},schema:function(){return this.$store.state.schema},orderBy:function(){return this.$store.state.orderBy},orderByMapping:function(){var e=this.orderBy;return e?Object.fromEntries(e.map((function(e){return[e.column,e]}))):{}},rowCount:function(){return this.$store.state.rowCount},currentPageNumber:function(){return this.$store.state.currentPageNumber},loadingStatus:function(){return this.$store.state.loadingStatus},pkName:function(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.primary_key_name)||"id"},linkColumnName:function(){var e=this.schema;return e.link_column_name},choicesLookup:function(){for(var e=this.schema,t={},a=0,n=Object.entries(e.properties);a<n.length;a++){var r=Object(U["a"])(n[a],2),s=r[0],o=r[1],i=o.extra.choices,c=function(e,t){return e[t.value]=t.display_name,e};t[s]=i?Object.values(i).reduce(c,{}):null}return t}},filters:{abbreviate:function(e){if(null===e)return null;var t=String(e);return t.length>100?t.substring(0,80)+"...":t},humanReadable:function(e){return J(e)},formatJSON:function(e){return JSON.stringify(JSON.parse(e),null,2)}},methods:{isForeignKey:function(e){var t=this.schema.properties[e];return void 0!=t&&t.extra.foreign_key},isBoolean:function(e){return"boolean"==this.schema.properties[e]["type"]},isInterval:function(e){return"time-delta"==this.schema.properties[e]["format"]},isJSON:function(e){return"json"==this.schema.properties[e]["format"]},isArray:function(e){return"array"==this.schema.properties[e]["type"]},isMediaColumn:function(e){return this.schema.media_columns.includes(e)},getTableName:function(e){return this.schema.properties[e].extra.to},closeSideBar:function(e){this.showFilter=e},resetRowCheckbox:function(){this.allSelected=!1,this.selectedRows=[]},selectRow:function(){this.allSelected=!1},selectAllRows:function(){var e=this;this.allSelected?this.selectedRows=this.rows.map((function(t){return t[e.pkName]})):this.selectedRows=[]},showSuccess:function(e){var t={contents:e,type:"success"};this.$store.commit("updateApiResponseMessage",t)},showMedia:function(e,t){var a=this;return Object(i["a"])(Object(o["a"])().mark((function n(){var r;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=a.$store.state.currentTableName,a.mediaViewerConfig={fileKey:e,columnName:t,tableName:r},a.showMediaViewer=!0;case 3:case"end":return n.stop()}}),n)})))()},deleteRow:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!confirm("Are you sure you want to delete row ".concat(e,"?"))){a.next=7;break}return console.log("Deleting!"),a.next=4,t.$store.dispatch("deleteRow",{tableName:t.tableName,rowID:e});case 4:return a.next=6,t.fetchRows();case 6:t.showSuccess("Successfully deleted row");case 7:case"end":return a.stop()}}),a)})))()},deleteRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete the selected rows?")){t.next=12;break}console.log("Deleting rows!"),a=0;case 3:if(!(a<e.selectedRows.length)){t.next=9;break}return t.next=6,e.$store.dispatch("deleteRow",{tableName:e.tableName,rowID:e.selectedRows[a]});case 6:a++,t.next=3;break;case 9:return t.next=11,e.fetchRows();case 11:e.showSuccess("Successfully deleted rows");case 12:case"end":return t.stop()}}),t)})))()},fetchRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchRows");case 2:case"end":return t.stop()}}),t)})))()},fetchSchema:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchSchema",e.tableName);case 2:a=e.$route.query.__order,console.log(a),a?e.$store.commit("updateOrderBy",Z(a)):e.$store.commit("updateOrderBy",e.schema.order_by);case 5:case"end":return t.stop()}}),t)})))()}},watch:{"$route.params.tableName":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("reset"),this.$store.commit("updateCurrentTablename",this.tableName),e.next=4,this.fetchSchema();case 4:return e.next=6,this.fetchRows();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),"$route.query":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("updateFilterParams",this.$router.currentRoute.query),e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rows:function(){this.resetRowCheckbox()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),e.$store.commit("updateFilterParams",e.$router.currentRoute.query),t.next=4,e.fetchSchema();case 4:return t.next=6,e.fetchRows();case 6:case"end":return t.stop()}}),t)})))()}}),ns=as,rs=(a("6fc4"),Object(b["a"])(ns,Qn,Zn,!1,null,null,null)),ss=rs.exports,os=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[e.schema?t("FormAdd",{attrs:{formSlug:e.formSlug,schema:e.schema}}):e._e()],1)},is=[],cs=(a("a4d3"),a("e01a"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.formConfig&&!e.successMessage?[t("h1",[e._v(e._s(e.formConfig.name))]),e.formConfig.description?t("p",[e._v(" "+e._s(e.formConfig.description)+" ")]):e._e()]:e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.successMessage,expression:"successMessage"}]},[t("h1",[e._v(e._s(e.$t("Form submitted")))]),t("p",[e._v(e._s(e.successMessage))]),t("ul",[t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.resetForm.apply(null,arguments)}}},[e._v(e._s(e.$t("Use again")))])]),t("li",[t("router-link",{attrs:{to:"/"}},[e._v(e._s(e.$t("Back to home page")))])],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.successMessage,expression:"!successMessage"}]},[e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),e.schema?t("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("NewForm",{attrs:{schema:e.schema}}),t("button",[e._v(e._s(e.$t("Submit")))])],1):e._e()],1)],2)}),ls=[],us=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.schema.properties,(function(a,n){return t("div",{key:a.title},[t("label",[e._v(e._s(a.title))]),t("InputField",{key:n,attrs:{isFilter:!1,columnName:n,title:a.title,type:a.type||a.anyOf[0].type,value:a.default}})],1)})),0)},ds=[],ps=n["b"].extend({props:{schema:Object},components:{InputField:ct}}),fs=ps,ms=(a("9fdf"),Object(b["a"])(fs,us,ds,!1,null,"aecd47b0",null)),hs=ms.exports,bs="./api/",vs=n["b"].extend({props:{formSlug:String,schema:Object},components:{NewForm:hs,FormErrors:Nt},data:function(){return{errors:[],formConfig:void 0,successMessage:null}},watch:{formSlug:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFormConfig();case 2:case"end":return t.stop()}}),t)})))()}},methods:{resetForm:function(){this.$refs.form.reset(),this.successMessage=null,this.errors=[]},fetchFormConfig:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormConfig",e.formSlug);case 2:a=t.sent,e.formConfig=a.data;case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,u,d,p,f;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,u=c[0],d=c[1],"null"==d?d=null:"array"==t.schema.properties[u].type&&(d=JSON.parse(d)),r[u]=d}catch(o){s.e(o)}finally{s.f()}return a.prev=4,a.next=7,l.a.post("".concat(bs,"forms/").concat(t.formSlug,"/"),r);case 7:p=a.sent,a.next=16;break;case 10:return a.prev=10,a.t0=a["catch"](4),f={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",f),t.errors=Y(a.t0.response.data,a.t0.response.status),a.abrupt("return");case 16:t.errors=[],t.successMessage=p.data.custom_form_success||"Successfully submitted form";case 18:case"end":return a.stop()}}),a,null,[[4,10]])})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFormConfig();case 2:case"end":return t.stop()}}),t)})))()}}),ws=vs,_s=(a("961e"),Object(b["a"])(ws,cs,ls,!1,null,"40f23f9e",null)),gs=_s.exports,ys=n["b"].extend({props:["formSlug"],components:{FormAdd:gs,DetailViewBase:Ka},computed:{schema:function(){return this.$store.state.formSchema}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormSchema",e.formSlug);case 2:case"end":return t.stop()}}),t)})))()}}),xs=ys,Os=Object(b["a"])(xs,os,is,!1,null,"f6a98390",null),Ns=Os.exports;n["b"].use(M["a"]);var ks=new M["a"]({mode:"hash",base:"",routes:[{path:"/",name:"home",component:Mn},{path:"/login/",name:"login",component:qn},{path:"/change-password/",name:"changePassword",component:Xn,props:!0},{path:"/forms/:formSlug/",name:"addForm",component:Ns,props:!0},{path:"/:tableName/",name:"rowListing",component:ss,props:!0},{path:"/:tableName/add/",name:"addRow",component:Ya,props:!0},{path:"/:tableName/:rowID/",name:"editRow",component:yn,props:!0}]}),js=(a("841c"),a("2f62")),Cs={state:{showAboutModal:!1},mutations:{updateShowAboutModal:function(e,t){e.showAboutModal=t}}},Ss={state:{siteName:"Piccolo Admin",piccoloAdminVersion:"Unknown"},mutations:{updateSiteName:function(e,t){e.siteName=t},updatePiccoloAdminVersion:function(e,t){e.piccoloAdminVersion=t}},actions:{fetchMeta:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("./public/meta/");case 2:a=t.sent,e.commit("updateSiteName",a.data.site_name),e.commit("updatePiccoloAdminVersion",a.data.piccolo_admin_version);case 5:case"end":return t.stop()}}),t)})))()}}},$s=a("a925");n["b"].use($s["a"]);var Rs=new $s["a"]({locale:"en",silentTranslationWarn:!0}),Ps=Rs,Ds="piccoloAdminDefaultLanguage",Ms={getDefaultLanguage:function(){return localStorage.getItem(Ds)},setDefaultLanguage:function(e){return localStorage.setItem(Ds,e)}},As={state:{translations:null},mutations:{updateTranslations:function(e,t){e.translations=t}},actions:{setupTranslations:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i,c,u;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("./public/translations/");case 2:return a=t.sent,n=a.data,e.commit("updateTranslations",n.translations),r=n.translations.map((function(e){return e.language_code.toLowerCase()})),s=null,i=Ms.getDefaultLanguage(),i&&-1!=r.indexOf(i)?s=i:"auto"==n.default_language_code?(c=navigator.language.toLowerCase(),-1!=r.indexOf(c)?s=c:(u=c.split("-")[0],-1!=r.indexOf(u)&&(s=u))):s=n.default_language_code,t.next=11,e.dispatch("loadTranslation",s||"en");case 11:case"end":return t.stop()}}),t)})))()},loadTranslation:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("./public/translations/".concat(t,"/"));case 2:a=e.sent,Ms.setDefaultLanguage(t),Ps.setLocaleMessage(a.data.language_code,a.data.translations),Ps.locale=a.data.language_code;case 6:case"end":return e.stop()}}),e)})))()}}};n["b"].use(js["a"]);var Vs="./api/",Fs=new js["a"].Store({modules:{aboutModalModule:Cs,metaModule:Ss,translationsModule:As},state:{apiResponseMessage:null,currentPageNumber:1,currentTableName:void 0,darkMode:!1,filterParams:{},pageSize:15,rowCount:0,rows:[],schema:void 0,formSchema:void 0,selectedRow:void 0,orderBy:null,tableNames:[],tableGroups:{},formConfigs:[],user:void 0,loadingStatus:!1,customLinks:{}},mutations:{updateTableGroups:function(e,t){e.tableGroups=t},updateTableNames:function(e,t){e.tableNames=t},updateFormConfigs:function(e,t){e.formConfigs=t},updateCurrentTablename:function(e,t){e.currentTableName=t},updateRows:function(e,t){e.rows=t},updateSelectedRow:function(e,t){e.selectedRow=t},updateSchema:function(e,t){e.schema=t},updateFormSchema:function(e,t){e.formSchema=t},updateApiResponseMessage:function(e,t){e.apiResponseMessage=t},updateUser:function(e,t){e.user=t},updateOrderBy:function(e,t){e.orderBy=t},reset:function(e){e.orderBy=null,e.filterParams={},e.currentPageNumber=1,e.rows=null},updateFilterParams:function(e,t){e.filterParams=t},updateRowCount:function(e,t){e.rowCount=t},updatePageSize:function(e,t){e.pageSize=t},updateCurrentPageNumber:function(e,t){e.currentPageNumber=t},updateDarkMode:function(e,t){e.darkMode=t,localStorage.setItem("darkMode",String(t))},updateLoadingStatus:function(e,t){e.loadingStatus=t},updateCustomLinks:function(e,t){e.customLinks=t}},actions:{fetchFormConfigs:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(Vs,"forms/"));case 2:a=t.sent,e.commit("updateFormConfigs",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchFormConfig:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(Vs,"forms/").concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchFormSchema:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(Vs,"forms/").concat(t,"/schema/"));case 2:return n=a.sent,e.commit("updateFormSchema",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},fetchTableNames:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(Vs,"tables/"));case 2:a=t.sent,e.commit("updateTableNames",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchTableGroups:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(Vs,"tables/grouped/"));case 2:a=t.sent,e.commit("updateTableGroups",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCustomLinks:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(Vs,"links/"));case 2:a=t.sent,e.commit("updateCustomLinks",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCount:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state.currentTableName,n=e.state.filterParams,t.next=4,l.a.get("".concat(Vs,"tables/").concat(a,"/count/"),{params:n});case 4:return r=t.sent,s=r.data,e.commit("updateRowCount",s.count),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))()},fetchRows:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("updateLoadingStatus",!0),a=e.state.filterParams,n=e.state.currentTableName,r=e.state.orderBy,r&&(a["__order"]=Q(r)),t.next=7,e.dispatch("fetchCount");case 7:return s=t.sent,a["__page_size"]=e.state.pageSize,s.count<a["__page_size"]&&e.commit("updateCurrentPageNumber",1),a["__page"]=e.state.currentPageNumber,t.prev=11,t.next=14,l.a.get("".concat(Vs,"tables/").concat(n,"/?__readable=true"),{params:a});case 14:i=t.sent,e.commit("updateRows",i.data.rows),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](11),console.log(t.t0.response),e.commit("updateApiResponseMessage",{contents:"Problem fetching ".concat(n," rows."),type:"error"});case 22:e.commit("updateLoadingStatus",!1);case 23:case"end":return t.stop()}}),t,null,[[11,18]])})))()},fetchTableReferences:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(Vs,"tables/").concat(t,"/references/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchIds:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},t.search&&(a["search"]=t.search),t.limit&&(a["limit"]=t.limit),t.offset&&(a["offset"]=t.offset),e.next=6,l.a.get("".concat(Vs,"tables/").concat(t.tableName,"/ids/"),{params:a});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},getNew:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(Vs,"tables/").concat(t,"/new/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchSingleRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(Vs,"tables/").concat(t.tableName,"/").concat(t.rowID,"/?__readable=true"));case 2:return n=a.sent,e.commit("updateSelectedRow",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},fetchSchema:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(Vs,"tables/").concat(t,"/schema/"));case 2:return n=a.sent,e.commit("updateSchema",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},createRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("".concat(Vs,"tables/").concat(t.tableName,"/"),t.data);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},deleteRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.delete("".concat(Vs,"tables/").concat(t.tableName,"/").concat(t.rowID,"/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},updateRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.patch("".concat(Vs,"tables/").concat(t.tableName,"/").concat(t.rowID,"/"),t.data);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchUser:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(Vs,"user/"));case 2:a=t.sent,e.commit("updateUser",a.data);case 4:case"end":return t.stop()}}),t)})))()}}}),Ts=a("ad3d"),Ls=a("ecee"),Bs=a("c074");Ls["c"].add(Bs["a"],Bs["b"],Bs["c"],Bs["d"],Bs["e"],Bs["f"],Bs["g"],Bs["i"],Bs["h"],Bs["j"],Bs["k"],Bs["l"],Bs["m"],Bs["n"],Bs["o"],Bs["r"],Bs["p"],Bs["q"],Bs["t"],Bs["u"],Bs["v"],Bs["w"],Bs["x"],Bs["y"],Bs["z"],Bs["A"],Bs["B"],Bs["C"],Bs["D"],Bs["E"],Bs["F"],Bs["G"],Bs["H"],Bs["s"],Bs["I"],Bs["J"],Bs["K"],Bs["L"],Bs["M"],Bs["N"],Bs["O"]),n["b"].component("font-awesome-icon",Ts["a"]);var Is=a("d604"),Us=a.n(Is),Es=a("a78e"),Hs=a.n(Es);l.a.interceptors.request.use((function(e){if(-1!=["POST","PUT","DELETE","PATCH"].indexOf(e.method.toUpperCase())){var t=Hs.a.get("csrftoken");e.headers["X-CSRFToken"]=t}return e})),l.a.defaults.transformResponse=[function(e){if("string"===typeof e)try{e=Us.a.parse(e)}catch(t){}return e}],n["b"].filter("readable",(function(e){return e.split("_").join(" ")})),n["b"].config.productionTip=!1,new n["b"]({i18n:Ps,router:ks,store:Fs,render:function(e){return e(D)}}).$mount("#app")},d997:function(e,t,a){},dcd6:function(e,t,a){},e034:function(e,t,a){"use strict";a("6693")},e6e0:function(e,t,a){},efff:function(e,t,a){"use strict";a("a661")},f2b1:function(e,t,a){},f325:function(e,t,a){},f481:function(e,t,a){"use strict";a("9ddc")},f697:function(e,t,a){},fcbe:function(e,t,a){"use strict";a("803f")},fffc:function(e,t,a){"use strict";a("85e4")}});
//# sourceMappingURL=app.f9e1b01e.js.map